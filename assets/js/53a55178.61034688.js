"use strict";(self.webpackChunksmart_van_2_0_github_io=self.webpackChunksmart_van_2_0_github_io||[]).push([[6478],{4434:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>l,software_category:()=>j,software_code:()=>m,software_language:()=>x,software_name:()=>d,software_status:()=>h,software_version:()=>u,toc:()=>v});var s=t(4848),i=t(8453),r=t(2349);const a={title:"Install the JOD SV Dist. on Remote Device",hide_title:!0,sidebar_position:1},o=void 0,l={id:"software/jod_smart_van/jod_smart_van/guides/install_jod_sv_dist_remote_device",title:"Install the JOD SV Dist. on Remote Device",description:"\x3c!--",source:"@site/docs/software/jod_smart_van/jod_smart_van/guides/install_jod_sv_dist_remote_device.mdx",sourceDirName:"software/jod_smart_van/jod_smart_van/guides",slug:"/software/jod_smart_van/jod_smart_van/guides/install_jod_sv_dist_remote_device",permalink:"/docs/software/jod_smart_van/jod_smart_van/guides/install_jod_sv_dist_remote_device",draft:!1,unlisted:!1,editUrl:"https://github.com/smart-van-2-0/smart-van-2-0.github.io/edit/main/docs/software/jod_smart_van/jod_smart_van/guides/install_jod_sv_dist_remote_device.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Install the JOD SV Dist. on Remote Device",hide_title:!0,sidebar_position:1},sidebar:"docsSidebar",previous:{title:"Guides",permalink:"/docs/software/jod_smart_van/jod_smart_van/guides/"},next:{title:"Configure JOD SV Dist.",permalink:"/docs/software/jod_smart_van/jod_smart_van/guides/configure_jod_sv_dist"}},c={},d="JOD Smart Van",h="Development",m="jod_smart_van",u="1.0.0",j="Object Agent",x="JOD Distribution",v=[{value:"Installing JOD SmartVan Distribution on Remote Device",id:"installing-jod-smartvan-distribution-on-remote-device",level:2},{value:"Installing Software Requirements",id:"installing-software-requirements",level:3},{value:"Downloading JOD SmartVan",id:"downloading-jod-smartvan",level:3},{value:"Initializing the Firmware",id:"initializing-the-firmware",level:3},{value:"Installing JOD SmartVan",id:"installing-jod-smartvan",level:3},{value:"JOD SmartVan scripts",id:"jod-smartvan-scripts",level:3}];function _(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Uo,{name:d,status:h}),"\n",(0,s.jsx)(n.h2,{id:"installing-jod-smartvan-distribution-on-remote-device",children:"Installing JOD SmartVan Distribution on Remote Device"}),"\n",(0,s.jsx)(n.p,{children:"With the hardware assembly completed, we now have a fully functional SmartVanBox.\nHowever, on the software side, it currently only has the operating system installed.\nTo enable communication with the SmartVan Mobile App, we need to install the JOD\nSmartVan Distribution."}),"\n",(0,s.jsx)(n.p,{children:"The JOD SmartVan Distribution comprises the software required to communicate with\nthe Mobile App and interact with the SmartVanBox hardware. In this section, we'll\ncover how to install and configure this software."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Short Steps"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Connect to the Raspberry Pi"}),"\n",(0,s.jsx)(n.li,{children:"Install Java, Python, and other software requirements"}),"\n",(0,s.jsx)(n.li,{children:"Download and extract JOD SmartVan Distribution"}),"\n",(0,s.jsx)(n.li,{children:"Enable venv usage for Python-based firmware"}),"\n",(0,s.jsx)(n.li,{children:"Create venv for each Python-based firmware"}),"\n",(0,s.jsx)(n.li,{children:"Install JOD SmartVan as a daemon/service"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["To install the necessary software, we first need to access the Raspberry Pi\ninside our SmartVanBox using an ",(0,s.jsx)(n.a,{href:"connect_remote_svbox",children:"SSH or Serial connection"})]}),"\n",(0,s.jsx)(n.h3,{id:"installing-software-requirements",children:"Installing Software Requirements"}),"\n",(0,s.jsx)(n.p,{children:"The JOD SmartVan Distribution requires several libraries and tools to function\nproperly. Install all necessary dependencies with the following command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"sudo apt-get update && sudo apt-get install -y \\\n    git curl wget nano \\\n    openjdk-11-jdk avahi-utils \\\n    python3 python3-pip python3-venv \\\n    libcairo2-dev libgirepository1.0-dev dbus-x11\n"})}),"\n",(0,s.jsx)(n.h3,{id:"downloading-jod-smartvan",children:"Downloading JOD SmartVan"}),"\n",(0,s.jsx)(n.p,{children:"Next, download and extract the JOD SmartVan distribution file. This file\nincludes the JOD daemon, its configurations, and firmware for communicating with\nthe SmartVanBox hardware."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"wget https://github.com/Smart-Van-2-0/com.robypomper.smartvan.jod_smart_van/releases/download/1.0.0/JOD_Smart_Van-1.0.0.tgz\ntar -xzf JOD_Smart_Van-1.0.0.tgz\ncd JOD_Smart_Van\n"})}),"\n",(0,s.jsxs)(n.p,{children:["You are now in the main directory of the JOD SmartVan Distribution\n(",(0,s.jsx)(n.code,{children:"/home/svbox/JOD_Smart_Van"}),")."]}),"\n",(0,s.jsx)(n.h3,{id:"initializing-the-firmware",children:"Initializing the Firmware"}),"\n",(0,s.jsx)(n.p,{children:"We need to configure the distribution and set up Python virtual environments\n(venv) for the firmware. Uncomment the VENV variable in the configs.sh file and\nset it to true. Then, initialize the Python venv for each firmware:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"cd deps/com.robypomper.smartvan.fw.victron/\npython3 -m venv venv; source venv/bin/activate; \\\n    pip install -r requirements.txt; deactivate; cd -\ncd deps/com.robypomper.smartvan.fw.sim7600/\npython3 -m venv venv; source venv/bin/activate; \\\n    pip install -r requirements.txt; deactivate; cd -\ncd deps/com.robypomper.smartvan.fw.upspack_v3/\npython3 -m venv venv; source venv/bin/activate; \\\n    pip install -r requirements.txt; deactivate; cd -\ncd deps/com.robypomper.smartvan.fw.sensehat/\npython3 -m venv venv; source venv/bin/activate; \\\n    pip install -r requirements.txt; deactivate; cd -\ncd deps/com.robypomper.smartvan.fw.ioexp/\npython3 -m venv venv; source venv/bin/activate; \\\n    pip install -r requirements.txt; deactivate; cd -\n"})}),"\n",(0,s.jsx)(n.p,{children:"For each firmware, the commands will:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Create a venv.\nActivate the venv.\nInstall the requirements.\nDeactivate the venv.\n"})}),"\n",(0,s.jsx)(n.h3,{id:"installing-jod-smartvan",children:"Installing JOD SmartVan"}),"\n",(0,s.jsx)(n.p,{children:"Now we are ready to install the JOD SmartVan Distribution as a daemon (a\nbackground service that starts and stops with the operating system)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"bash install.sh\n"})}),"\n",(0,s.jsxs)(n.p,{children:["To check if it's running correctly, you can use the ",(0,s.jsx)(n.code,{children:"state.sh"})," script or view\nthe JOD daemon logs."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"bash state.sh\ntail -f logs/jospJSL.log\n"})}),"\n",(0,s.jsx)(n.p,{children:"Installation and init system configurations are inherited from the JOD Dist TMPL,\nand currently it supports following init systems:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"launchd"})," (macOS)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"systemd"})," (Linux)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"wininitsys"})," (Windows)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"jod-smartvan-scripts",children:"JOD SmartVan scripts"}),"\n",(0,s.jsxs)(n.p,{children:["Among the ",(0,s.jsx)(n.code,{children:"start.sh"})," and ",(0,s.jsx)(n.code,{children:"install.sh"})," script, there are other scripts that can\nbe used to manage the JOD Smart Van instance:"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Command"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:["Start    ",(0,s.jsx)("br",{}),(0,s.jsx)(n.code,{children:"$ bash start.sh"})]}),(0,s.jsxs)(n.td,{children:["Start local JOD instance in background mode, logs can be retrieved via ",(0,s.jsx)(n.code,{children:"tail -f logs/console.log"})," command"]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:["Start    ",(0,s.jsx)("br",{}),(0,s.jsx)(n.code,{children:"$ bash start.sh true"})]}),(0,s.jsx)(n.td,{children:"Start local JOD instance in foreground mode, user can interact with the instance using the JOD Shell"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:["Stop     ",(0,s.jsx)("br",{}),(0,s.jsx)(n.code,{children:"$ bash stop.sh"})]}),(0,s.jsx)(n.td,{children:"Stop local JOD instance, if it's running"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:["State    ",(0,s.jsx)("br",{}),(0,s.jsx)(n.code,{children:"$ bash state.sh"})]}),(0,s.jsx)(n.td,{children:"Print the local JOD instance state (obj's id and name, isRunning, PID...)"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:["Install  ",(0,s.jsx)("br",{}),(0,s.jsx)(n.code,{children:"$ bash install.sh"})]}),(0,s.jsx)(n.td,{children:"Install local JOD instance as system daemon/service"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:["Uninstall",(0,s.jsx)("br",{}),(0,s.jsx)(n.code,{children:"$ bash uninstall.sh"})]}),(0,s.jsx)(n.td,{children:"Uninstall local JOD instance as system daemon/service"})]})]})]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(_,{...e})}):_(e)}},9683:(e,n,t)=>{t.d(n,{A:()=>r});t(6540);const s={img_container:"img_container_ABGT",img_link:"img_link_Hl3U",img_tag:"img_tag_oucX"};var i=t(4848);function r(e){return(0,i.jsx)("div",{className:s.img_container,children:(0,i.jsx)("a",{href:e.link?e.link:e.src,className:s.img_link,children:(0,i.jsx)("img",{src:e.src,alt:e.alt,width:e.width?e.width:"100%",className:s.img_tag})})})}},7109:(e,n,t)=>{t.d(n,{A:()=>r});t(6540);const s={container:"container_mzDT",h1:"h1_n6cG"};var i=t(4848);function r(e){return(0,i.jsx)("div",{className:s.container,children:(0,i.jsxs)("h1",{className:s.h1,children:[e.section," - ",e.subsection]})})}},3161:(e,n,t)=>{t.d(n,{r0:()=>h,Wx:()=>r,A:()=>a,PD:()=>l,OM:()=>c,hB:()=>o,Ay:()=>m});t(6540);const s={web_site_map:"web_site_map_qmuZ"};var i=t(4848);function r(){return(0,i.jsx)("a",{href:"/docs",children:"DOCS"})}function a(){return(0,i.jsx)("a",{href:"/docs/features",children:"FEATURES"})}function o(){return(0,i.jsx)("a",{href:"/docs/specs",children:"SPECIFICATIONS"})}function l(){return(0,i.jsx)("a",{href:"/docs/hardware",children:"HARDWARE"})}function c(){return(0,i.jsx)("a",{href:"/docs/software",children:"SOFTWARE"})}function d(){return(0,i.jsx)("a",{href:"/about",children:"ABOUT"})}function h(){return(0,i.jsx)("a",{href:"/collaborate",children:"COLLABORATE"})}function m(){return(0,i.jsxs)("div",{className:s.web_site_map,children:[(0,i.jsx)(a,{}),"|",(0,i.jsx)(l,{}),"|",(0,i.jsx)(c,{}),"|",(0,i.jsx)(o,{}),"|",(0,i.jsx)(d,{}),"|",(0,i.jsx)(h,{})]})}},2349:(e,n,t)=>{t.d(n,{VG:()=>c,N8:()=>h,e0:()=>d,Uo:()=>l});t(6540);const s={tmpl_container:"tmpl_container_A9hk",specs_table:"specs_table_BWcA",head_container:"head_container_KR7S",descr:"descr_CuXp",lists_container:"lists_container_Qejd",logo:"logo_Y7bK",list:"list_tLdV",list_item:"list_item_WUvh"};var i=t(9683),r=t(7109),a=t(3161),o=t(4848);function l(e){return(0,o.jsx)(r.A,{section:"Software",subsection:e.name})}function c(e){return(0,o.jsxs)("div",{className:s.head_container,children:[(0,o.jsxs)("div",{className:s.lists_container,children:[e.url_logo?(0,o.jsxs)("div",{children:[(0,o.jsx)(i.A,{src:e.url_logo,width:"200px"}),(0,o.jsx)("hr",{})]}):null,(0,o.jsx)("h3",{children:"Status"}),(0,o.jsxs)("ul",{className:s.list,children:[(0,o.jsxs)("li",{className:s.list_item,children:[(0,o.jsx)("b",{children:"Status:"})," ",e.current_status]}),(0,o.jsxs)("li",{className:s.list_item,children:[(0,o.jsx)("b",{children:"Version:"})," ",e.current_version]}),(0,o.jsxs)("li",{className:s.list_item,children:[(0,o.jsx)("b",{children:"Category:"})," ",e.category]}),(0,o.jsxs)("li",{className:s.list_item,children:[(0,o.jsx)("b",{children:"Language:"})," ",e.language]}),(0,o.jsxs)("li",{className:s.list_item,children:[(0,o.jsx)("b",{children:"Code:"})," ",e.code]})]}),(0,o.jsx)("hr",{}),(0,o.jsx)("h3",{children:"Links"}),(0,o.jsxs)("ul",{className:s.list,children:[e.url_repo?(0,o.jsx)("li",{className:s.list_item,children:(0,o.jsx)("a",{href:e.url_repo+"",children:"Git Repo"})}):"",e.url_docs?(0,o.jsx)("li",{className:s.list_item,children:(0,o.jsx)("a",{href:e.url_docs+"",children:"Docs"})}):"",e.url_downloads?(0,o.jsx)("li",{className:s.list_item,children:(0,o.jsx)("a",{href:e.url_downloads+"",children:"Downloads"})}):"",e.url_support?(0,o.jsx)("li",{className:s.list_item,children:(0,o.jsx)("a",{href:e.url_support+"",children:"Support"})}):""]})]}),(0,o.jsx)("div",{className:s.descr,children:e.children})]})}function d(){return(0,o.jsxs)("p",{children:["The following table lists all Smart Van ",(0,o.jsx)(a.hB,{})," that can be provided by this firmware. Then, you can use this info to customize the `struct.jod` file of the ",(0,o.jsx)("a",{href:"/docs/software/jod_smart_van/jod_smart_van",children:"JOD Smart Van"})," distribution."]})}function h(e){return(0,o.jsxs)("table",{className:s.specs_table,children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"Property Name"}),(0,o.jsx)("th",{children:"Specification"})]}),Object.keys(e.specs_provided).map(((n,t)=>{const s=e.specs_provided[n].fw_value,i=e.specs_provided[n].group,r=e.specs_provided[n].sub_group,a=e.specs_provided[n].spec;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)("code",{children:s})}),(0,o.jsx)("td",{children:(0,o.jsxs)("a",{href:"/docs/specs/"+i+"/"+r+"#"+a,children:[i," > ",r," > ",a]})})]},t)}))]})}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var s=t(6540);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);